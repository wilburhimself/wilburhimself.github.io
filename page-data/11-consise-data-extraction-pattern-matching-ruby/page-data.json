{"componentChunkName":"component---src-templates-blog-post-js","path":"/11-consise-data-extraction-pattern-matching-ruby/","result":{"data":{"site":{"siteMetadata":{"title":"Wilbur Suero - Software Craftsman","author":"Wilbur Suero"}},"markdownRemark":{"id":"b86d63f1-c187-5141-a473-addb3f551b25","excerpt":"When working with collections of structured data in Ruby, such as arrays of hashes, we often need to extract or manipulate specific fields from each element in…","html":"<p>When working with collections of structured data in Ruby, such as arrays of hashes, we often need to extract or manipulate specific fields from each element in the collection. Traditionally, this is done using iterative loops and if statements, which can become verbose and hard to read, especially if the collection is large or complex.</p>\n<p>This is where pattern matching can help. Pattern matching is a powerful feature that allows you to match and extract specific fields from structured data with ease. Ruby 2.7 introduced a new pattern matching syntax that makes it even easier to use.</p>\n<p>Here’s an example of how you can use pattern matching to extract fields from an array of user profiles:</p>\n<div class=\"gatsby-highlight\" data-language=\"ruby\"><pre class=\"language-ruby\"><code class=\"language-ruby\">people <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token punctuation\">{</span> <span class=\"token symbol\">name</span><span class=\"token operator\">:</span> <span class=\"token string-literal\"><span class=\"token string\">\"John\"</span></span><span class=\"token punctuation\">,</span> <span class=\"token symbol\">age</span><span class=\"token operator\">:</span> <span class=\"token number\">30</span><span class=\"token punctuation\">,</span> <span class=\"token symbol\">gender</span><span class=\"token operator\">:</span> <span class=\"token string-literal\"><span class=\"token string\">\"male\"</span></span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> <span class=\"token symbol\">name</span><span class=\"token operator\">:</span> <span class=\"token string-literal\"><span class=\"token string\">\"Jane\"</span></span><span class=\"token punctuation\">,</span> <span class=\"token symbol\">age</span><span class=\"token operator\">:</span> <span class=\"token number\">25</span><span class=\"token punctuation\">,</span> <span class=\"token symbol\">gender</span><span class=\"token operator\">:</span> <span class=\"token string-literal\"><span class=\"token string\">\"female\"</span></span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> <span class=\"token symbol\">name</span><span class=\"token operator\">:</span> <span class=\"token string-literal\"><span class=\"token string\">\"Jack\"</span></span><span class=\"token punctuation\">,</span> <span class=\"token symbol\">age</span><span class=\"token operator\">:</span> <span class=\"token number\">40</span><span class=\"token punctuation\">,</span> <span class=\"token symbol\">gender</span><span class=\"token operator\">:</span> <span class=\"token string-literal\"><span class=\"token string\">\"male\"</span></span> <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">]</span>\n\npeople<span class=\"token punctuation\">.</span><span class=\"token keyword\">each</span> <span class=\"token keyword\">do</span> <span class=\"token operator\">|</span>person<span class=\"token operator\">|</span>\n  <span class=\"token keyword\">case</span> person\n  <span class=\"token keyword\">in</span> <span class=\"token punctuation\">{</span> <span class=\"token symbol\">name</span><span class=\"token operator\">:</span> name<span class=\"token punctuation\">,</span> <span class=\"token symbol\">age</span><span class=\"token operator\">:</span> age<span class=\"token punctuation\">,</span> <span class=\"token symbol\">gender</span><span class=\"token operator\">:</span> gender <span class=\"token punctuation\">}</span>\n    puts <span class=\"token string-literal\"><span class=\"token string\">\"</span><span class=\"token interpolation\"><span class=\"token delimiter punctuation\">#{</span><span class=\"token content\">name</span><span class=\"token delimiter punctuation\">}</span></span><span class=\"token string\"> is a </span><span class=\"token interpolation\"><span class=\"token delimiter punctuation\">#{</span><span class=\"token content\">age</span><span class=\"token delimiter punctuation\">}</span></span><span class=\"token string\">-year-old </span><span class=\"token interpolation\"><span class=\"token delimiter punctuation\">#{</span><span class=\"token content\">gender</span><span class=\"token delimiter punctuation\">}</span></span><span class=\"token string\">.\"</span></span>\n  <span class=\"token keyword\">end</span>\n<span class=\"token keyword\">end</span></code></pre></div>\n<p>In this example, we’re using a case statement with a pattern that matches against each element in the people array. The pattern specifies that we want to extract the name, age, and gender keys from each hash.</p>\n<p>If the pattern matches, we’ll execute the code inside the in block, which prints out a string using the extracted values for each element in the array.</p>\n<p>Here’s another example. Let’s say you have an array of structured data that represents colors:</p>\n<div class=\"gatsby-highlight\" data-language=\"ruby\"><pre class=\"language-ruby\"><code class=\"language-ruby\">colors <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token punctuation\">{</span> <span class=\"token symbol\">red</span><span class=\"token operator\">:</span> <span class=\"token number\">255</span><span class=\"token punctuation\">,</span> <span class=\"token symbol\">green</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token symbol\">blue</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> <span class=\"token symbol\">red</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token symbol\">green</span><span class=\"token operator\">:</span> <span class=\"token number\">255</span><span class=\"token punctuation\">,</span> <span class=\"token symbol\">blue</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> <span class=\"token symbol\">red</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token symbol\">green</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token symbol\">blue</span><span class=\"token operator\">:</span> <span class=\"token number\">255</span> <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">]</span>\n\ncolors<span class=\"token punctuation\">.</span><span class=\"token keyword\">each</span> <span class=\"token keyword\">do</span> <span class=\"token operator\">|</span>color<span class=\"token operator\">|</span>\n  <span class=\"token keyword\">case</span> color\n  <span class=\"token keyword\">in</span> <span class=\"token punctuation\">{</span> <span class=\"token symbol\">red</span><span class=\"token operator\">:</span> <span class=\"token number\">255</span><span class=\"token punctuation\">,</span> <span class=\"token symbol\">green</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token symbol\">blue</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span> <span class=\"token punctuation\">}</span>\n    puts <span class=\"token string-literal\"><span class=\"token string\">\"The color is red.\"</span></span>\n  <span class=\"token keyword\">in</span> <span class=\"token punctuation\">{</span> <span class=\"token symbol\">red</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token symbol\">green</span><span class=\"token operator\">:</span> <span class=\"token number\">255</span><span class=\"token punctuation\">,</span> <span class=\"token symbol\">blue</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span> <span class=\"token punctuation\">}</span>\n    puts <span class=\"token string-literal\"><span class=\"token string\">\"The color is green.\"</span></span>\n  <span class=\"token keyword\">in</span> <span class=\"token punctuation\">{</span> <span class=\"token symbol\">red</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token symbol\">green</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token symbol\">blue</span><span class=\"token operator\">:</span> <span class=\"token number\">255</span> <span class=\"token punctuation\">}</span>\n    puts <span class=\"token string-literal\"><span class=\"token string\">\"The color is blue.\"</span></span>\n  <span class=\"token keyword\">else</span>\n    puts <span class=\"token string-literal\"><span class=\"token string\">\"The color is not primary.\"</span></span>\n  <span class=\"token keyword\">end</span>\n<span class=\"token keyword\">end</span></code></pre></div>\n<p>In this example, we’re using a case statement with patterns that match against each element in the colors array. The patterns specify that we want the red, green, and blue keys to have specific values that correspond to the primary colors.</p>\n<p>If the pattern matches, we’ll execute the code inside the in block, which prints out a string indicating the color. Otherwise, we’ll execute the code inside the else block, which prints out a string indicating that the color is not primary.</p>\n<p>Overall, pattern matching can make your code more concise and expressive when working with collections of structured data. By using patterns to extract specific values from each element in the collection, you can avoid verbose if statements and make your code easier to read and maintain.</p>\n<p>If you’re working with collections of structured data in Ruby, pattern matching is a powerful tool to have in your arsenal. Give it a try and see how it can help you write more concise and expressive code!</p>","frontmatter":{"title":"Concise Data Extraction with Pattern Matching in Ruby","date":"April 14, 2023"}}},"pageContext":{"slug":"/11-consise-data-extraction-pattern-matching-ruby/","previous":{"fields":{"slug":"/10-getting-started-action-cable-ruby-on-rails/"},"frontmatter":{"title":"Getting started with ActionCable in Ruby on Rails - An Introduction"}},"next":{"fields":{"slug":"/12-look-before-you-leap/"},"frontmatter":{"title":"Look before you leap"}}}},"staticQueryHashes":["2418676009","3128451518"]}