{"componentChunkName":"component---src-templates-blog-post-js","path":"/10-getting-started-action-cable-ruby-on-rails/","result":{"data":{"site":{"siteMetadata":{"title":"Wilbur Suero - Software Craftsman","author":"Wilbur Suero"}},"markdownRemark":{"id":"0c9300f7-cfd9-5ed8-94b7-6297d582f7d3","excerpt":"ActionCable is a powerful feature in Ruby on Rails that allows developers to build real-time web applications using WebSockets. With ActionCable, you can createâ€¦","html":"<p>ActionCable is a powerful feature in Ruby on Rails that allows developers to build real-time web applications using WebSockets. With ActionCable, you can create channels that handle bidirectional communication between the client and the server in real time. This tutorial will provide an introduction to ActionCable and guide you through creating a simple chat application.</p>\n<p><strong>Step 1: Create a new Rails app and install the necessary dependencies</strong></p>\n<p>First, create a new Rails app with the <code class=\"language-text\">--api</code> flag to generate an API-only application:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">rails new chat_app <span class=\"token parameter variable\">--api</span></code></pre></div>\n<p>Then, add the necessary gems to the <code class=\"language-text\">Gemfile</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"ruby\"><pre class=\"language-ruby\"><code class=\"language-ruby\"><span class=\"token comment\"># Gemfile</span>\ngem <span class=\"token string-literal\"><span class=\"token string\">'rack-cors'</span></span>\ngem <span class=\"token string-literal\"><span class=\"token string\">'redis'</span></span>\ngem <span class=\"token string-literal\"><span class=\"token string\">'redis-rails'</span></span>\ngem <span class=\"token string-literal\"><span class=\"token string\">'puma'</span></span></code></pre></div>\n<p>Install the gems:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">bundle <span class=\"token function\">install</span></code></pre></div>\n<p><strong>Step 2: Create a new React app using create-react-app</strong></p>\n<p>Next, create a new React app inside the Rails app using <code class=\"language-text\">create-react-app</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token builtin class-name\">cd</span> chat_app\nnpx create-react-app client</code></pre></div>\n<p>This will create a new React app inside the <code class=\"language-text\">client</code> directory.</p>\n<p><strong>Step 3: Set up CORS and configure Redis for ActionCable</strong></p>\n<p>To allow Cross-Origin Resource Sharing (CORS) between the Rails server and the React client, add the following code to <code class=\"language-text\">config/initializers/cors.rb</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"ruby\"><pre class=\"language-ruby\"><code class=\"language-ruby\"><span class=\"token comment\"># config/initializers/cors.rb</span>\nRails<span class=\"token punctuation\">.</span>application<span class=\"token punctuation\">.</span>config<span class=\"token punctuation\">.</span>middleware<span class=\"token punctuation\">.</span>insert_before <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> Rack<span class=\"token double-colon punctuation\">::</span>Cors <span class=\"token keyword\">do</span>\n  allow <span class=\"token keyword\">do</span>\n    origins <span class=\"token string-literal\"><span class=\"token string\">'*'</span></span>\n    resource <span class=\"token string-literal\"><span class=\"token string\">'*'</span></span><span class=\"token punctuation\">,</span> <span class=\"token symbol\">headers</span><span class=\"token operator\">:</span> <span class=\"token symbol\">:any</span><span class=\"token punctuation\">,</span> <span class=\"token symbol\">methods</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token symbol\">:get</span><span class=\"token punctuation\">,</span> <span class=\"token symbol\">:post</span><span class=\"token punctuation\">,</span> <span class=\"token symbol\">:put</span><span class=\"token punctuation\">,</span> <span class=\"token symbol\">:patch</span><span class=\"token punctuation\">,</span> <span class=\"token symbol\">:delete</span><span class=\"token punctuation\">,</span> <span class=\"token symbol\">:options</span><span class=\"token punctuation\">,</span> <span class=\"token symbol\">:head</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token symbol\">expose</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string-literal\"><span class=\"token string\">'access-token'</span></span><span class=\"token punctuation\">,</span> <span class=\"token string-literal\"><span class=\"token string\">'expiry'</span></span><span class=\"token punctuation\">,</span> <span class=\"token string-literal\"><span class=\"token string\">'token-type'</span></span><span class=\"token punctuation\">,</span> <span class=\"token string-literal\"><span class=\"token string\">'uid'</span></span><span class=\"token punctuation\">,</span> <span class=\"token string-literal\"><span class=\"token string\">'client'</span></span><span class=\"token punctuation\">]</span>\n  <span class=\"token keyword\">end</span>\n<span class=\"token keyword\">end</span></code></pre></div>\n<p>Also, configure Redis for ActionCable in <code class=\"language-text\">config/cable.yml</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"ruby\"><pre class=\"language-ruby\"><code class=\"language-ruby\"><span class=\"token comment\"># config/cable.yml</span>\n<span class=\"token symbol\">development</span><span class=\"token operator\">:</span>\n  <span class=\"token symbol\">adapter</span><span class=\"token operator\">:</span> redis\n  <span class=\"token symbol\">url</span><span class=\"token operator\">:</span> redis<span class=\"token operator\">:</span><span class=\"token operator\">/</span><span class=\"token operator\">/</span>localhost<span class=\"token operator\">:</span><span class=\"token number\">6379</span><span class=\"token operator\">/</span><span class=\"token number\">1</span></code></pre></div>\n<p><strong>Step 4: Create a new channel</strong></p>\n<p>Create a new channel called <code class=\"language-text\">chat_channel</code> using the Rails generator:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">rails generate channel Chat</code></pre></div>\n<p>This will create a new <code class=\"language-text\">chat_channel.rb</code> file in <code class=\"language-text\">app/channels</code> with the following code:</p>\n<div class=\"gatsby-highlight\" data-language=\"ruby\"><pre class=\"language-ruby\"><code class=\"language-ruby\"><span class=\"token comment\"># app/channels/chat_channel.rb</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">ChatChannel</span> <span class=\"token operator\">&lt;</span> ApplicationCable<span class=\"token double-colon punctuation\">::</span>Channel\n  <span class=\"token keyword\">def</span> <span class=\"token method-definition\"><span class=\"token function\">subscribed</span></span>\n    stream_from <span class=\"token string-literal\"><span class=\"token string\">\"chat_channel\"</span></span>\n  <span class=\"token keyword\">end</span>\n\n  <span class=\"token keyword\">def</span> <span class=\"token method-definition\"><span class=\"token function\">unsubscribed</span></span>\n    <span class=\"token comment\"># Any cleanup needed when channel is unsubscribed</span>\n  <span class=\"token keyword\">end</span>\n<span class=\"token keyword\">end</span></code></pre></div>\n<p>This channel subscribes to the <code class=\"language-text\">chat_channel</code> stream and defines the <code class=\"language-text\">subscribed</code> method to stream messages from this channel.</p>\n<p><strong>Step 5: Update the</strong> <code class=\"language-text\">routes.rb</code> <strong>file</strong></p>\n<p>Add the following code to <code class=\"language-text\">config/routes.rb</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"ruby\"><pre class=\"language-ruby\"><code class=\"language-ruby\"><span class=\"token comment\"># config/routes.rb</span>\nRails<span class=\"token punctuation\">.</span>application<span class=\"token punctuation\">.</span>routes<span class=\"token punctuation\">.</span>draw <span class=\"token keyword\">do</span>\n  resources <span class=\"token symbol\">:chat_rooms</span><span class=\"token punctuation\">,</span> <span class=\"token symbol\">only</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token symbol\">:index</span><span class=\"token punctuation\">,</span> <span class=\"token symbol\">:create</span><span class=\"token punctuation\">]</span>\n  mount ActionCable<span class=\"token punctuation\">.</span>server <span class=\"token operator\">=></span> <span class=\"token string-literal\"><span class=\"token string\">'/cable'</span></span>\n<span class=\"token keyword\">end</span></code></pre></div>\n<p>This code sets up the routes for the chat rooms and mounts the ActionCable server at the <code class=\"language-text\">/cable</code> endpoint.</p>\n<p><strong>Step 6: Create a new controller</strong></p>\n<p>Create a new controller called <code class=\"language-text\">chat_rooms_controller.rb</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">rails generate controller ChatRooms index create</code></pre></div>\n<p>This will create a new <code class=\"language-text\">chat_rooms_controller.rb</code> file in <code class=\"language-text\">app/controllers</code> with the following code:</p>\n<div class=\"gatsby-highlight\" data-language=\"ruby\"><pre class=\"language-ruby\"><code class=\"language-ruby\"><span class=\"token comment\"># app/controllers/chat_rooms_controller.rb</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">ChatRoomsController</span> <span class=\"token operator\">&lt;</span> ApplicationController\n  <span class=\"token keyword\">def</span> <span class=\"token method-definition\"><span class=\"token function\">index</span></span>\n    <span class=\"token variable\">@messages</span> <span class=\"token operator\">=</span> Message<span class=\"token punctuation\">.</span>all\n  <span class=\"token keyword\">end</span>\n\n  <span class=\"token keyword\">def</span> <span class=\"token method-definition\"><span class=\"token function\">create</span></span>\n    ActionCable<span class=\"token punctuation\">.</span>server<span class=\"token punctuation\">.</span>broadcast <span class=\"token string-literal\"><span class=\"token string\">\"chat_channel\"</span></span><span class=\"token punctuation\">,</span> <span class=\"token symbol\">message</span><span class=\"token operator\">:</span> params<span class=\"token punctuation\">[</span><span class=\"token symbol\">:message</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token symbol\">user</span><span class=\"token operator\">:</span> <span class=\"token string-literal\"><span class=\"token string\">\"anonymous\"</span></span>\n    Message<span class=\"token punctuation\">.</span>create<span class=\"token punctuation\">(</span><span class=\"token symbol\">content</span><span class=\"token operator\">:</span> params<span class=\"token punctuation\">[</span><span class=\"token symbol\">:message</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token symbol\">user</span><span class=\"token operator\">:</span> <span class=\"token string-literal\"><span class=\"token string\">\"anonymous\"</span></span><span class=\"token punctuation\">)</span>\n    redirect_to chat_rooms_path\n  <span class=\"token keyword\">end</span></code></pre></div>\n<p>This controller defines the <code class=\"language-text\">index</code> method to display the chat room and the <code class=\"language-text\">create</code> method to broadcast the new message to the <code class=\"language-text\">chat_channel</code> stream and create a new <code class=\"language-text\">Message</code> object.</p>\n<p><strong>Step 7: Update the</strong> <code class=\"language-text\">App.js</code> <strong>file in the React client</strong></p>\n<p>In the React client, update the <code class=\"language-text\">App.js</code> file in the <code class=\"language-text\">src</code> directory with the following code:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> useState<span class=\"token punctuation\">,</span> useEffect <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> logo <span class=\"token keyword\">from</span> <span class=\"token string\">'./logo.svg'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token string\">'./App.css'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> ChatRoom <span class=\"token keyword\">from</span> <span class=\"token string\">'./ChatRoom'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> ActionCableConsumer <span class=\"token keyword\">from</span> <span class=\"token string\">'react-actioncable-provider'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">App</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>messages<span class=\"token punctuation\">,</span> setMessages<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/chat_rooms'</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">response</span> <span class=\"token operator\">=></span> response<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">data</span> <span class=\"token operator\">=></span> <span class=\"token function\">setMessages</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">handleReceivedMessage</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">response</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">setMessages</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token operator\">...</span>messages<span class=\"token punctuation\">,</span> response<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token operator\">&lt;</span>div className<span class=\"token operator\">=</span><span class=\"token string\">\"App\"</span><span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>header className<span class=\"token operator\">=</span><span class=\"token string\">\"App-header\"</span><span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>img src<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>logo<span class=\"token punctuation\">}</span> className<span class=\"token operator\">=</span><span class=\"token string\">\"App-logo\"</span> alt<span class=\"token operator\">=</span><span class=\"token string\">\"logo\"</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>h1<span class=\"token operator\">></span>React <span class=\"token operator\">+</span> Rails Chat App<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h1<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>header<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>div className<span class=\"token operator\">=</span><span class=\"token string\">\"Chat-room\"</span><span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>ActionCableConsumer\n          channel<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">channel</span><span class=\"token operator\">:</span> <span class=\"token string\">'ChatChannel'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n          onReceived<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>handleReceivedMessage<span class=\"token punctuation\">}</span>\n        <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>ChatRoom messages<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>messages<span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> App<span class=\"token punctuation\">;</span></code></pre></div>\n<p>This code sets up the <code class=\"language-text\">App</code> component to fetch the initial list of messages from the server and render a <code class=\"language-text\">ChatRoom</code> component with an <code class=\"language-text\">ActionCableConsumer</code> to listen for new messages.</p>\n<p><strong>Step 8: Create a new</strong> <code class=\"language-text\">ChatRoom</code> <strong>component</strong></p>\n<p>Create a new <code class=\"language-text\">ChatRoom.js</code> file in the <code class=\"language-text\">src</code> directory with the following code:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> useState <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">ChatRoom</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> messages <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>message<span class=\"token punctuation\">,</span> setMessage<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">handleChange</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">setMessage</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">handleSubmit</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    event<span class=\"token punctuation\">.</span><span class=\"token function\">preventDefault</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/chat_rooms'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">method</span><span class=\"token operator\">:</span> <span class=\"token string\">'POST'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">headers</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token string-property property\">'Content-Type'</span><span class=\"token operator\">:</span> <span class=\"token string\">'application/json'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string-property property\">'Accept'</span><span class=\"token operator\">:</span> <span class=\"token string\">'application/json'</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">body</span><span class=\"token operator\">:</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">message</span><span class=\"token operator\">:</span> message <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">setMessage</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token operator\">&lt;</span>div className<span class=\"token operator\">=</span><span class=\"token string\">\"Chat-room-container\"</span><span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>div className<span class=\"token operator\">=</span><span class=\"token string\">\"Chat-messages\"</span><span class=\"token operator\">></span>\n        <span class=\"token punctuation\">{</span>messages<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">message<span class=\"token punctuation\">,</span> index</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n          <span class=\"token operator\">&lt;</span>div key<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>index<span class=\"token punctuation\">}</span> className<span class=\"token operator\">=</span><span class=\"token string\">\"Chat-message\"</span><span class=\"token operator\">></span>\n            <span class=\"token operator\">&lt;</span>p className<span class=\"token operator\">=</span><span class=\"token string\">\"Chat-message-content\"</span><span class=\"token operator\">></span><span class=\"token punctuation\">{</span>message<span class=\"token punctuation\">.</span>content<span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>p<span class=\"token operator\">></span>\n            <span class=\"token operator\">&lt;</span>p className<span class=\"token operator\">=</span><span class=\"token string\">\"Chat-message-user\"</span><span class=\"token operator\">></span><span class=\"token punctuation\">{</span>message<span class=\"token punctuation\">.</span>user<span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>p<span class=\"token operator\">></span>\n          <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>form className<span class=\"token operator\">=</span><span class=\"token string\">\"Chat-form\"</span> onSubmit<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>handleSubmit<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>input\n          type<span class=\"token operator\">=</span><span class=\"token string\">\"text\"</span>\n          value<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>message<span class=\"token punctuation\">}</span>\n          onChange<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>handleChange<span class=\"token punctuation\">}</span>\n          placeholder<span class=\"token operator\">=</span><span class=\"token string\">\"Type your message here\"</span>\n        <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>button type<span class=\"token operator\">=</span><span class=\"token string\">\"submit\"</span><span class=\"token operator\">></span>Send<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>button<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>form<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> ChatRoom<span class=\"token punctuation\">;</span></code></pre></div>\n<p>This code defines the <code class=\"language-text\">ChatRoom</code> component to render the list of messages and a form to send new messages.</p>\n<p><strong>Step 9: Start the servers</strong></p>\n<p>Start the Rails server:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">rails s</code></pre></div>\n<p>And start the React client server:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token builtin class-name\">cd</span> client\n<span class=\"token function\">npm</span> start</code></pre></div>\n<p>Visit <a href=\"http://localhost:3000\"><code class=\"language-text\">http://localhost:3000</code></a> in your browser to see the chat app in action!</p>\n<p><strong>Conclusion</strong></p>\n<p>In this tutorial, we walked through the process of setting up ActionCable in a Ruby on Rails API and creating a React front-end to send and receive real-time messages. We used <code class=\"language-text\">create-react-app</code> to create a new React app and <code class=\"language-text\">react-actioncable-provider</code> to handle the WebSocket connection and receive new messages.</p>\n<p>By now, you should have a good understanding of how ActionCable works and how to use it to build real-time applications with Ruby on Rails and React.</p>\n<p>To learn more about ActionCable, check out the official Rails documentation at <a href=\"https://guides.rubyonrails.org/action_cable_overview.html\"><strong>https://guides.rubyonrails.org/action_cable_overview.html</strong></a>. For more information about React and <code class=\"language-text\">create-react-app</code>, visit <a href=\"https://reactjs.org/\"><strong>https://reactjs.org/</strong></a> and <a href=\"https://create-react-app.dev/\"><strong>https://create-react-app.dev/</strong></a>.</p>\n<p>Thank you for reading!</p>","frontmatter":{"title":"Getting started with ActionCable in Ruby on Rails - An Introduction","date":"February 20, 2023"}}},"pageContext":{"slug":"/10-getting-started-action-cable-ruby-on-rails/","previous":{"fields":{"slug":"/09-function-arguments-how-many/"},"frontmatter":{"title":"Function arguments, how many are too many?"}},"next":{"fields":{"slug":"/11-consise-data-extraction-pattern-matching-ruby/"},"frontmatter":{"title":"Concise Data Extraction with Pattern Matching in Ruby"}}}},"staticQueryHashes":["2418676009","3128451518"]}