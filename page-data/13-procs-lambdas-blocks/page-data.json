{"componentChunkName":"component---src-templates-blog-post-js","path":"/13-procs-lambdas-blocks/","result":{"data":{"site":{"siteMetadata":{"title":"Wilbur Suero - Software Craftsman","author":"Wilbur Suero"}},"markdownRemark":{"id":"dd99a099-ddc1-54cc-898e-95ddf1aefb85","excerpt":"In Ruby on Rails development, harnessing the power of procs, lambdas, and blocks can significantly improve the clarity, reusability, and performance of your…","html":"<p>In Ruby on Rails development, harnessing the power of procs, lambdas, and blocks can significantly improve the clarity, reusability, and performance of your code. In this comprehensive guide, we’ll explore real-world examples of using these constructs in Rails applications, complete with code snippets and insightful analysis of their performance impact.</p>\n<h3>Blocks in Rails:</h3>\n<p>Rails developers often encounter blocks when iterating through collections or rendering views. Let’s dive into a classic example of rendering a list of posts using a block:</p>\n<div class=\"gatsby-highlight\" data-language=\"ruby\"><pre class=\"language-ruby\"><code class=\"language-ruby\"><span class=\"token operator\">&lt;</span><span class=\"token operator\">%</span> <span class=\"token variable\">@posts</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">each</span> <span class=\"token keyword\">do</span> <span class=\"token operator\">|</span>post<span class=\"token operator\">|</span> <span class=\"token string-literal\"><span class=\"token string\">%>\n  &lt;div class=\"post\"></span></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">%=</span> post<span class=\"token punctuation\">.</span>title <span class=\"token string-literal\"><span class=\"token string\">%>\n  &lt;/div></span></span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">%</span> <span class=\"token keyword\">end</span> <span class=\"token operator\">%</span><span class=\"token operator\">></span></code></pre></div>\n<h3>Procs in Rails:</h3>\n<p>Procs are excellent tools for encapsulating logic that needs to be reused across your Rails application. Consider an example where you want to filter posts by a specific category using a proc:</p>\n<div class=\"gatsby-highlight\" data-language=\"ruby\"><pre class=\"language-ruby\"><code class=\"language-ruby\">category_filter <span class=\"token operator\">=</span> proc <span class=\"token punctuation\">{</span> <span class=\"token operator\">|</span>post<span class=\"token operator\">|</span> post<span class=\"token punctuation\">.</span>published<span class=\"token operator\">?</span> <span class=\"token operator\">&amp;&amp;</span> post<span class=\"token punctuation\">.</span>category <span class=\"token operator\">==</span> <span class=\"token string-literal\"><span class=\"token string\">'Technology'</span></span> <span class=\"token punctuation\">}</span>\n<span class=\"token variable\">@tech_posts</span> <span class=\"token operator\">=</span> <span class=\"token variable\">@posts</span><span class=\"token punctuation\">.</span>select<span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>category_filter<span class=\"token punctuation\">)</span></code></pre></div>\n<h3>Lambdas in Rails:</h3>\n<p>Lambdas, with their stricter argument handling and return semantics, provide a robust way to define complex logic. Let’s explore an example of using a lambda to sort posts by their word count:</p>\n<div class=\"gatsby-highlight\" data-language=\"ruby\"><pre class=\"language-ruby\"><code class=\"language-ruby\">sort_by_word_count <span class=\"token operator\">=</span> lambda <span class=\"token punctuation\">{</span> <span class=\"token operator\">|</span>post1<span class=\"token punctuation\">,</span> post2<span class=\"token operator\">|</span> post1<span class=\"token punctuation\">.</span>content<span class=\"token punctuation\">.</span>split<span class=\"token punctuation\">.</span>size <span class=\"token operator\">&lt;=></span> post2<span class=\"token punctuation\">.</span>content<span class=\"token punctuation\">.</span>split<span class=\"token punctuation\">.</span>size <span class=\"token punctuation\">}</span>\n<span class=\"token variable\">@sorted_posts</span> <span class=\"token operator\">=</span> <span class=\"token variable\">@posts</span><span class=\"token punctuation\">.</span>sort<span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>sort_by_word_count<span class=\"token punctuation\">)</span></code></pre></div>\n<h3>Utilizing Procs and Lambdas with Parameters:</h3>\n<p>Both procs and lambdas can accept parameters, allowing you to create dynamic and reusable chunks of code. Here’s a scenario where you want to create a filter that checks if a post’s title contains a given keyword:</p>\n<div class=\"gatsby-highlight\" data-language=\"ruby\"><pre class=\"language-ruby\"><code class=\"language-ruby\">title_contains <span class=\"token operator\">=</span> lambda <span class=\"token keyword\">do</span> <span class=\"token operator\">|</span>keyword<span class=\"token operator\">|</span>\n  proc <span class=\"token punctuation\">{</span> <span class=\"token operator\">|</span>post<span class=\"token operator\">|</span> post<span class=\"token punctuation\">.</span>published<span class=\"token operator\">?</span> <span class=\"token operator\">&amp;&amp;</span> post<span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">.</span><span class=\"token keyword\">include</span><span class=\"token operator\">?</span><span class=\"token punctuation\">(</span>keyword<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">end</span>\n\nkeyword_filter <span class=\"token operator\">=</span> title_contains<span class=\"token punctuation\">.</span>call<span class=\"token punctuation\">(</span><span class=\"token string-literal\"><span class=\"token string\">'Ruby'</span></span><span class=\"token punctuation\">)</span>\n<span class=\"token variable\">@ruby_posts</span> <span class=\"token operator\">=</span> <span class=\"token variable\">@posts</span><span class=\"token punctuation\">.</span>select<span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>keyword_filter<span class=\"token punctuation\">)</span></code></pre></div>\n<h3>Performance Implications and Trade-offs:</h3>\n<ul>\n<li><strong>Blocks</strong>: Blocks are highly performant due to their lightweight nature, making them ideal for simple encapsulation within methods. However, they lack the reusability of procs and lambdas.</li>\n<li><strong>Procs and Lambdas</strong>: Procs and lambdas offer greater flexibility and reusability, but they introduce a slightly higher performance overhead compared to blocks due to their object-oriented nature.</li>\n<li><strong>Lambda vs. Proc</strong>: Lambdas enforce stricter argument handling and return behavior, leading to more predictable outcomes. While this can enhance code quality, it may require more careful consideration of argument types and return values.</li>\n</ul>\n<p>By utilizing procs, lambdas, and blocks, you can enhance your Ruby on Rails development to new levels. Blocks are the best choice for brief iterations, while procs and lambdas are great for encapsulating reusable logic with parameters. As you develop your Rails applications, maintain a balance between performance and versatility by selecting the appropriate construct for each circumstance.</p>","frontmatter":{"title":"Procs, Lambdas and Blocks in Ruby on Rails","date":"August 18, 2023"}}},"pageContext":{"slug":"/13-procs-lambdas-blocks/","previous":{"fields":{"slug":"/12-look-before-you-leap/"},"frontmatter":{"title":"Look before you leap"}},"next":{"fields":{"slug":"/14-autocomplete-on-scale-with-ruby-on-rails/"},"frontmatter":{"title":"Autocomplete at Scale - How Tries and Partitioning Can Unlock Blazing-Fast Search in Ruby on Rails"}}}},"staticQueryHashes":["2418676009","3128451518"]}