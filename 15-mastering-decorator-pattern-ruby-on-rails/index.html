<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style id="typography.js">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:100%/1.75 'Merriweather','Georgia',serif;box-sizing:border-box;overflow-y:scroll;}*{box-sizing:inherit;}*:before{box-sizing:inherit;}*:after{box-sizing:inherit;}body{color:hsla(0,0%,0%,0.9);font-family:'Merriweather','Georgia',serif;font-weight:400;word-wrap:break-word;font-kerning:normal;-moz-font-feature-settings:"kern", "liga", "clig", "calt";-ms-font-feature-settings:"kern", "liga", "clig", "calt";-webkit-font-feature-settings:"kern", "liga", "clig", "calt";font-feature-settings:"kern", "liga", "clig", "calt";}img{max-width:100%;margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}h1{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:Montserrat,sans-serif;font-weight:900;text-rendering:optimizeLegibility;font-size:2.5rem;line-height:1.1;}h2{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:1.73286rem;line-height:1.1;}h3{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:1.4427rem;line-height:1.1;}h4{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.1;letter-spacing:0.140625em;text-transform:uppercase;}h5{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:0.83255rem;line-height:1.1;}h6{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:0.75966rem;line-height:1.1;font-style:italic;}hgroup{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}ul{margin-left:1.75rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;list-style-position:outside;list-style-image:none;list-style:disc;}ol{margin-left:1.75rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;list-style-position:outside;list-style-image:none;}dl{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}dd{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}p{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}figure{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}pre{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;font-size:0.85rem;line-height:1.75rem;}table{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;font-size:1rem;line-height:1.75rem;border-collapse:collapse;width:100%;}fieldset{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}blockquote{margin-left:-1.75rem;margin-right:1.75rem;margin-top:0;padding-bottom:0;padding-left:1.42188rem;padding-right:0;padding-top:0;margin-bottom:1.75rem;font-size:1.20112rem;line-height:1.75rem;color:hsla(0,0%,0%,0.59);font-style:italic;border-left:0.32813rem solid hsla(0,0%,0%,0.9);}form{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}noscript{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}iframe{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}hr{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:calc(1.75rem - 1px);background:hsla(0,0%,0%,0.2);border:none;height:1px;}address{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}b{font-weight:700;}strong{font-weight:700;}dt{font-weight:700;}th{font-weight:700;}li{margin-bottom:calc(1.75rem / 2);}ol li{padding-left:0;}ul li{padding-left:0;}li > ol{margin-left:1.75rem;margin-bottom:calc(1.75rem / 2);margin-top:calc(1.75rem / 2);}li > ul{margin-left:1.75rem;margin-bottom:calc(1.75rem / 2);margin-top:calc(1.75rem / 2);}blockquote *:last-child{margin-bottom:0;}li *:last-child{margin-bottom:0;}p *:last-child{margin-bottom:0;}li > p{margin-bottom:calc(1.75rem / 2);}code{font-size:0.85rem;line-height:1.75rem;}kbd{font-size:0.85rem;line-height:1.75rem;}samp{font-size:0.85rem;line-height:1.75rem;}abbr{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}acronym{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}abbr[title]{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;text-decoration:none;}thead{text-align:left;}td,th{text-align:left;border-bottom:1px solid hsla(0,0%,0%,0.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding-left:1.16667rem;padding-right:1.16667rem;padding-top:0.875rem;padding-bottom:calc(0.875rem - 1px);}th:first-child,td:first-child{padding-left:0;}th:last-child,td:last-child{padding-right:0;}blockquote > :last-child{margin-bottom:0;}blockquote cite{font-size:1rem;line-height:1.75rem;color:hsla(0,0%,0%,0.9);font-weight:400;}blockquote cite:before{content:"— ";}ul,ol{margin-left:0;}@media only screen and (max-width:480px){ul,ol{margin-left:1.75rem;}blockquote{margin-left:-1.3125rem;margin-right:0;padding-left:0.98438rem;}}h1,h2,h3,h4,h5,h6{margin-top:3.5rem;}a{box-shadow:0 1px 0 0 currentColor;color:#007acc;text-decoration:none;}a:hover,a:active{box-shadow:none;}mark,ins{background:#007acc;color:white;padding:0.10938rem 0.21875rem;text-decoration:none;}a.gatsby-resp-image-link{box-shadow:none;}</style><style data-href="/styles.98a513fdf05bf5edf9b6.css" id="gatsby-global-css">@import url(https://fonts.googleapis.com/css2?family=Fraunces:ital,opsz,wght@0,9..144,100..900;1,9..144,100..900&display=swap);code[class*=language-],pre[class*=language-]{font-family:Consolas,Menlo,Monaco,Andale Mono WT,Andale Mono,Lucida Console,Lucida Sans Typewriter,DejaVu Sans Mono,Bitstream Vera Sans Mono,Liberation Mono,Nimbus Mono L,Courier New,Courier,monospace;font-size:14px;line-height:1.375;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;tab-size:4;-webkit-hyphens:none;hyphens:none;background:#f5f7ff;color:#5e6687}code[class*=language-]::selection,code[class*=language-] ::selection,pre[class*=language-]::selection,pre[class*=language-] ::selection{text-shadow:none;background:#dfe2f1}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#898ea4}.token.punctuation{color:#5e6687}.token.namespace{opacity:.7}.token.boolean,.token.number,.token.operator{color:#c76b29}.token.property{color:#c08b30}.token.tag{color:#3d8fd1}.token.string{color:#22a2c9}.token.selector{color:#6679cc}.token.attr-name{color:#c76b29}.language-css .token.string,.style .token.string,.token.entity,.token.url{color:#22a2c9}.token.attr-value,.token.control,.token.directive,.token.keyword,.token.unit{color:#ac9739}.token.atrule,.token.regex,.token.statement{color:#22a2c9}.token.placeholder,.token.variable{color:#3d8fd1}.token.deleted{text-decoration:line-through}.token.inserted{border-bottom:1px dotted #202746;text-decoration:none}.token.italic{font-style:italic}.token.bold,.token.important{font-weight:700}.token.important{color:#c94922}.token.entity{cursor:help}pre>code.highlight{outline:.4em solid #c94922;outline-offset:.4em}.line-numbers .line-numbers-rows{border-right-color:#dfe2f1}.line-numbers-rows>span:before{color:#979db4}.line-highlight{background:rgba(107,115,148,.2);background:linear-gradient(90deg,rgba(107,115,148,.2) 70%,rgba(107,115,148,0))}body{background:#fff;color:#444a66;font-family:Fraunces,serif;font-optical-sizing:auto;font-size:20px}a{color:#f60}a:hover{color:#000}h1,h2,h3,h4,h5,h6{font-family:Fraunces,serif;font-size:40px}ol,ul{list-style-position:inside}.gatsby-highlight{border-top:4px solid #d3d3d3;border-bottom:4px solid #d3d3d3;margin-bottom:2em}.gatsby-highlight>pre{margin:0;background:#fff}</style><meta name="generator" content="Gatsby 2.32.13"/><link rel="preconnect dns-prefetch" href="https://www.google-analytics.com"/><link rel="alternate" type="application/rss+xml" href="/rss.xml"/><link rel="icon" href="/favicon-32x32.png?v=4a9773549091c227cd2eb82ccd9c5e3a" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><meta name="theme-color" content="#663339"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=4a9773549091c227cd2eb82ccd9c5e3a"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=4a9773549091c227cd2eb82ccd9c5e3a"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=4a9773549091c227cd2eb82ccd9c5e3a"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=4a9773549091c227cd2eb82ccd9c5e3a"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=4a9773549091c227cd2eb82ccd9c5e3a"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=4a9773549091c227cd2eb82ccd9c5e3a"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=4a9773549091c227cd2eb82ccd9c5e3a"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=4a9773549091c227cd2eb82ccd9c5e3a"/><title data-react-helmet="true">Mastering the decorator pattern in Ruby on Rails | Wilbur Suero - Software Craftsman</title><meta data-react-helmet="true" name="description" content="As Ruby on Rails developers, we’re often faced with the challenge of adding new features or modifying the behavior of existing components without introducing…"/><meta data-react-helmet="true" property="og:title" content="Mastering the decorator pattern in Ruby on Rails"/><meta data-react-helmet="true" property="og:description" content="As Ruby on Rails developers, we’re often faced with the challenge of adding new features or modifying the behavior of existing components without introducing…"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:creator" content="Wilbur Suero"/><meta data-react-helmet="true" name="twitter:title" content="Mastering the decorator pattern in Ruby on Rails"/><meta data-react-helmet="true" name="twitter:description" content="As Ruby on Rails developers, we’re often faced with the challenge of adding new features or modifying the behavior of existing components without introducing…"/><link as="script" rel="preload" href="/webpack-runtime-16b370fdedbe4b3f81f1.js"/><link as="script" rel="preload" href="/styles-29147cbc04bbc833f6a0.js"/><link as="script" rel="preload" href="/framework-8de36d3fd07627b19105.js"/><link as="script" rel="preload" href="/app-2775f0ba4f87a5827ee0.js"/><link as="script" rel="preload" href="/133dca110fad53aa1997b630637bbac3134a2d14-4010ae11badb504b98f5.js"/><link as="script" rel="preload" href="/cd7d5f864fc9e15ed8adef086269b0aeff617554-203f96efec8a89d8837b.js"/><link as="script" rel="preload" href="/component---src-templates-blog-post-js-0f3ed1f0a6031c5bc20f.js"/><link as="fetch" rel="preload" href="/page-data/15-mastering-decorator-pattern-ruby-on-rails/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/2418676009.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/3128451518.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div style="margin-left:auto;margin-right:auto;max-width:40em;padding:2.625rem 1.3125rem"><h3 style="margin-top:0;margin-bottom:-1.75rem"><a style="box-shadow:none;text-decoration:none;color:inherit" href="/">Wilbur Suero - Software Craftsman</a></h3><h1>Mastering the decorator pattern in Ruby on Rails</h1><p style="font-size:0.83255rem;line-height:1.75rem;display:block;margin-bottom:1.75rem;margin-top:-1.75rem">April 15, 2024</p><div><p>As Ruby on Rails developers, we’re often faced with the challenge of adding new features or modifying the behavior of existing components without introducing unnecessary complexity or tight coupling. One design pattern that can help us address this challenge is the Decorator Pattern. In this blog post, we’ll explore the Decorator Pattern, understand its benefits, and see how we can apply it in our Ruby on Rails applications.</p>
<h3>What is the Decorator Pattern?</h3>
<p>The Decorator Pattern is a structural design pattern that allows us to add responsibilities to individual objects dynamically, without affecting the behavior of other objects from the same class. It works by wrapping an object with one or more decorator objects, each of which adds a specific piece of functionality.</p>
<p>In the context of Ruby on Rails, we can use the Decorator Pattern to enhance the functionality of our models, services, or other components, while keeping our codebase modular and maintainable.</p>
<h3>Advantages of the Decorator Pattern</h3>
<p>The Decorator Pattern offers several benefits that make it a valuable tool in your Ruby on Rails toolkit:</p>
<ol>
<li><strong>Flexibility</strong>: Decorators allow you to add or modify the behavior of an object without changing its core functionality. This makes it easier to introduce new features or adapt to changing requirements.</li>
<li><strong>Maintainability</strong>: By encapsulating specific responsibilities in decorators, you can keep your core classes focused and easier to understand. This promotes better code organization and readability.</li>
<li><strong>Testability</strong>: Decorators can be tested in isolation, which simplifies the testing process and makes it easier to ensure the correctness of your application.</li>
<li><strong>Composition over Inheritance</strong>: The Decorator Pattern encourages composition over inheritance, which is generally considered a better design principle, as it promotes more flexible and reusable code.</li>
</ol>
<h3>Implementing the Decorator Pattern in Ruby on Rails</h3>
<p>Let’s consider an example of how you might use the Decorator Pattern in a Ruby on Rails application. Imagine you have a <code class="language-text">User</code> model, and you want to add some additional functionality, such as formatting the user’s name and displaying their full address.</p>
<p>Without the Decorator Pattern, you might be tempted to add these methods directly to the <code class="language-text">User</code> model. However, this would result in a model that is responsible for too many concerns, making it harder to maintain and test.</p>
<p>Instead, let’s create a <code class="language-text">UserDecorator</code> class that wraps the <code class="language-text">User</code> model and adds the desired functionality:</p>
<div class="gatsby-highlight" data-language="ruby"><pre class="language-ruby"><code class="language-ruby"><span class="token keyword">class</span> <span class="token class-name">UserDecorator</span> <span class="token operator">&lt;</span> SimpleDelegator
  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">full_name</span></span>
    <span class="token string-literal"><span class="token string">"</span><span class="token interpolation"><span class="token delimiter punctuation">#{</span><span class="token content">first_name</span><span class="token delimiter punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token delimiter punctuation">#{</span><span class="token content">last_name</span><span class="token delimiter punctuation">}</span></span><span class="token string">"</span></span>
  <span class="token keyword">end</span>

  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">full_address</span></span>
    <span class="token string-literal"><span class="token string">"</span><span class="token interpolation"><span class="token delimiter punctuation">#{</span><span class="token content">address_line_1</span><span class="token delimiter punctuation">}</span></span><span class="token string">, </span><span class="token interpolation"><span class="token delimiter punctuation">#{</span><span class="token content">address_line_2</span><span class="token delimiter punctuation">}</span></span><span class="token string">, </span><span class="token interpolation"><span class="token delimiter punctuation">#{</span><span class="token content">city</span><span class="token delimiter punctuation">}</span></span><span class="token string">, </span><span class="token interpolation"><span class="token delimiter punctuation">#{</span><span class="token content">state</span><span class="token delimiter punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token delimiter punctuation">#{</span><span class="token content">zip_code</span><span class="token delimiter punctuation">}</span></span><span class="token string">"</span></span>
  <span class="token keyword">end</span>
<span class="token keyword">end</span></code></pre></div>
<p>In this example, the <code class="language-text">UserDecorator</code> class inherits from <code class="language-text">SimpleDelegator</code>, which is a built-in Ruby class that provides a simple way to implement the Decorator Pattern. The <code class="language-text">UserDecorator</code> class delegates all method calls to the wrapped <code class="language-text">User</code> object, and then adds the <code class="language-text">full_name</code> and <code class="language-text">full_address</code> methods on top of that.</p>
<p>Now, in your application, you can use the <code class="language-text">UserDecorator</code> like this:</p>
<div class="gatsby-highlight" data-language="ruby"><pre class="language-ruby"><code class="language-ruby">user <span class="token operator">=</span> User<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
decorated_user <span class="token operator">=</span> <span class="token class-name">UserDecorator</span><span class="token punctuation">.</span><span class="token keyword">new</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span>
puts decorated_user<span class="token punctuation">.</span>full_name <span class="token comment"># Output: "John Doe"</span>
puts decorated_user<span class="token punctuation">.</span>full_address <span class="token comment"># Output: "123 Main St, Apt 4, Anytown, CA 12345"</span></code></pre></div>
<p>By using the Decorator Pattern, you’ve kept your <code class="language-text">User</code> model focused on its core responsibilities, while adding the additional functionality in a separate, composable component.</p>
<h3>Advanced Decorator Patterns in Ruby on Rails</h3>
<p>The basic Decorator Pattern shown above is just the beginning. In Ruby on Rails, you can also explore more advanced decorator patterns, such as:</p>
<h4>1 - Facility Decorator</h4>
<p>Imagine you have a <code class="language-text">FacilityService</code> that is responsible for managing facilities in your application. The basic <code class="language-text">FacilityService</code> might look like this:</p>
<div class="gatsby-highlight" data-language="ruby"><pre class="language-ruby"><code class="language-ruby"><span class="token comment"># app/services/facility_service.rb</span>
<span class="token keyword">class</span> <span class="token class-name">FacilityService</span>
  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">get_facility</span></span><span class="token punctuation">(</span>id<span class="token punctuation">)</span>
    Facility<span class="token punctuation">.</span>find<span class="token punctuation">(</span>id<span class="token punctuation">)</span>
  <span class="token keyword">end</span>

  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">create_facility</span></span><span class="token punctuation">(</span>attributes<span class="token punctuation">)</span>
    Facility<span class="token punctuation">.</span>create<span class="token punctuation">(</span>attributes<span class="token punctuation">)</span>
  <span class="token keyword">end</span>

  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">update_facility</span></span><span class="token punctuation">(</span>facility<span class="token punctuation">,</span> attributes<span class="token punctuation">)</span>
    facility<span class="token punctuation">.</span>update<span class="token punctuation">(</span>attributes<span class="token punctuation">)</span>
    facility
  <span class="token keyword">end</span>
<span class="token keyword">end</span></code></pre></div>
<p>Now, let’s say you want to add some additional functionality to the <code class="language-text">FacilityService</code>, such as caching the results of the <code class="language-text">get_facility</code> method. You can use the Decorator Pattern to achieve this without modifying the original <code class="language-text">FacilityService</code> class.</p>
<div class="gatsby-highlight" data-language="ruby"><pre class="language-ruby"><code class="language-ruby"><span class="token comment"># app/decorators/caching_facility_service_decorator.rb</span>
<span class="token keyword">class</span> <span class="token class-name">CachingFacilityServiceDecorator</span> <span class="token operator">&lt;</span> SimpleDelegator
  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">get_facility</span></span><span class="token punctuation">(</span>id<span class="token punctuation">)</span>
    Rails<span class="token punctuation">.</span>cache<span class="token punctuation">.</span>fetch<span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"facility_</span><span class="token interpolation"><span class="token delimiter punctuation">#{</span><span class="token content">id</span><span class="token delimiter punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span> <span class="token keyword">do</span>
      <span class="token keyword">super</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span>
    <span class="token keyword">end</span>
  <span class="token keyword">end</span>

  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">create_facility</span></span><span class="token punctuation">(</span>attributes<span class="token punctuation">)</span>
    facility <span class="token operator">=</span> <span class="token keyword">super</span><span class="token punctuation">(</span>attributes<span class="token punctuation">)</span>
    Rails<span class="token punctuation">.</span>cache<span class="token punctuation">.</span>delete<span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"facility_</span><span class="token interpolation"><span class="token delimiter punctuation">#{</span><span class="token content">facility<span class="token punctuation">.</span>id</span><span class="token delimiter punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
    facility
  <span class="token keyword">end</span>

  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">update_facility</span></span><span class="token punctuation">(</span>facility<span class="token punctuation">,</span> attributes<span class="token punctuation">)</span>
    updated_facility <span class="token operator">=</span> <span class="token keyword">super</span><span class="token punctuation">(</span>facility<span class="token punctuation">,</span> attributes<span class="token punctuation">)</span>
    Rails<span class="token punctuation">.</span>cache<span class="token punctuation">.</span>delete<span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"facility_</span><span class="token interpolation"><span class="token delimiter punctuation">#{</span><span class="token content">facility<span class="token punctuation">.</span>id</span><span class="token delimiter punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
    updated_facility
  <span class="token keyword">end</span>
<span class="token keyword">end</span></code></pre></div>
<p>In this example, the <code class="language-text">CachingFacilityServiceDecorator</code> wraps the original <code class="language-text">FacilityService</code> and adds caching functionality to the <code class="language-text">get_facility</code> method. It uses the <code class="language-text">Rails.cache.fetch</code> method to retrieve the facility from the cache if available, or fetch it from the database and store the result in the cache. Additionally, the <code class="language-text">create_facility</code> and <code class="language-text">update_facility</code> methods are decorated to invalidate the cache when a facility is created or updated.</p>
<h4>2 - View Decorator</h4>
<p>You can also use the Decorator Pattern to enhance the presentation logic of your views. For example:</p>
<div class="gatsby-highlight" data-language="ruby"><pre class="language-ruby"><code class="language-ruby"><span class="token comment"># app/decorators/user_view_decorator.rb</span>
<span class="token keyword">class</span> <span class="token class-name">UserViewDecorator</span> <span class="token operator">&lt;</span> SimpleDelegator
  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">formatted_name</span></span>
    <span class="token string-literal"><span class="token string">"</span><span class="token interpolation"><span class="token delimiter punctuation">#{</span><span class="token content">first_name</span><span class="token delimiter punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token delimiter punctuation">#{</span><span class="token content">last_name</span><span class="token delimiter punctuation">}</span></span><span class="token string">"</span></span>
  <span class="token keyword">end</span>

  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">formatted_email</span></span>
    <span class="token string-literal"><span class="token string">"</span><span class="token interpolation"><span class="token delimiter punctuation">#{</span><span class="token content">email</span><span class="token delimiter punctuation">}</span></span><span class="token string"> (</span><span class="token interpolation"><span class="token delimiter punctuation">#{</span><span class="token content">role</span><span class="token delimiter punctuation">}</span></span><span class="token string">)"</span></span>
  <span class="token keyword">end</span>
<span class="token keyword">end</span>

<span class="token comment"># Usage in a view</span>
<span class="token operator">&lt;</span>h1<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">%=</span> <span class="token class-name">UserViewDecorator</span><span class="token punctuation">.</span><span class="token keyword">new</span><span class="token punctuation">(</span><span class="token variable">@user</span><span class="token punctuation">)</span><span class="token punctuation">.</span>formatted_name <span class="token string-literal"><span class="token string">%>&lt;/h1></span></span>
<span class="token operator">&lt;</span>p<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">%=</span> <span class="token class-name">UserViewDecorator</span><span class="token punctuation">.</span><span class="token keyword">new</span><span class="token punctuation">(</span><span class="token variable">@user</span><span class="token punctuation">)</span><span class="token punctuation">.</span>formatted_email <span class="token string-literal"><span class="token string">%>&lt;/p></span></span></code></pre></div>
<h4>3 - Model Decorator</h4>
<p>Finally, you can use the Decorator Pattern to extend the behavior of your models:</p>
<div class="gatsby-highlight" data-language="ruby"><pre class="language-ruby"><code class="language-ruby"><span class="token comment"># app/decorators/user_model_decorator.rb</span>
<span class="token keyword">class</span> <span class="token class-name">UserModelDecorator</span> <span class="token operator">&lt;</span> SimpleDelegator
  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">save</span></span>
    before_save
    <span class="token keyword">super</span>
  <span class="token keyword">end</span>

  <span class="token keyword">private</span>

  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">before_save</span></span>
    <span class="token comment"># Add custom validation or business logic</span>
    errors<span class="token punctuation">.</span>add<span class="token punctuation">(</span><span class="token symbol">:name</span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">'cannot be blank'</span></span><span class="token punctuation">)</span> <span class="token keyword">if</span> name<span class="token punctuation">.</span>blank<span class="token operator">?</span>
  <span class="token keyword">end</span>
<span class="token keyword">end</span>

<span class="token comment"># Usage</span>
user <span class="token operator">=</span> <span class="token class-name">UserModelDecorator</span><span class="token punctuation">.</span><span class="token keyword">new</span><span class="token punctuation">(</span><span class="token class-name">User</span><span class="token punctuation">.</span><span class="token keyword">new</span><span class="token punctuation">)</span>
user<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string-literal"><span class="token string">''</span></span>
user<span class="token punctuation">.</span>save <span class="token comment"># => false, user.errors.full_messages # => ["Name cannot be blank"]</span></code></pre></div>
<p>In this example, the <code class="language-text">UserModelDecorator</code> wraps a <code class="language-text">User</code> model and adds a <code class="language-text">before_save</code> hook that performs custom validation.</p>
<p>By mastering the Decorator Pattern and its various applications, you can create more modular, testable, and maintainable Ruby on Rails applications that are better equipped to handle evolving requirements and growing complexity.</p>
<p>The Decorator Pattern is a powerful tool in the Ruby on Rails developer’s arsenal. By separating concerns and allowing you to dynamically add responsibilities to objects, the Decorator Pattern can help you build more flexible, testable, and maintainable applications. As you continue to develop your Ruby on Rails skills, keep the Decorator Pattern in mind as a way to organize your codebase and promote best practices.</p></div><hr style="margin-bottom:1.75rem"/><ul style="display:flex;flex-wrap:wrap;justify-content:space-between;list-style:none;padding:0"><li><a rel="prev" href="/14-autocomplete-on-scale-with-ruby-on-rails/">← <!-- -->Autocomplete at Scale - How Tries and Partitioning Can Unlock Blazing-Fast Search in Ruby on Rails</a></li><li><a rel="next" href="/16-elevating-ruby-on-rails-codebase-value-objects/">Elevating Your Ruby on Rails Apps with Value Objects<!-- --> →</a></li></ul><div style="display:flex"><div class=" gatsby-image-wrapper" style="position:relative;overflow:hidden;display:inline-block;width:50px;height:50px;margin-right:0.875rem;margin-bottom:0;min-width:50px;border-radius:100%"><img aria-hidden="true" src="data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAGAABAQEBAQAAAAAAAAAAAAAAAAQDBQL/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAG/PGQ6jlCLwFQP/8QAHRAAAgIBBQAAAAAAAAAAAAAAAAIBAxIREyEyQf/aAAgBAQABBQLNRbFgixR7YrXd5y0Le6nn/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAwEBPwEf/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAgEBPwEf/8QAHBAAAgEFAQAAAAAAAAAAAAAAAAERAhAhMWFB/9oACAEBAAY/An50xU3w0bkcPF2I/8QAHBAAAwACAwEAAAAAAAAAAAAAAAERITFBUWGx/9oACAEBAAE/IaRblg4i9s6xK9nReStJPBvhm0uJjQsysHbds+Q9s2qf/9oADAMBAAIAAwAAABBgyDz/xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAEDAQE/EB//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAECAQE/EB//xAAcEAEBAAMAAwEAAAAAAAAAAAABEQAhMUFRYXH/2gAIAQEAAT8QnrQNbCWyd1iOw4NDtFMdcJIy0yEo1A0iLzHlowLPgnvHQOHi80Yqm3v3BTdPn9MQSKKXy1z/2Q==" alt="Wilbur Suero" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms"/><noscript><picture><source srcset="/static/df706245265e481076ada3342ef14f5d/99438/profile-pic.jpg 1x,
/static/df706245265e481076ada3342ef14f5d/aba1d/profile-pic.jpg 1.5x,
/static/df706245265e481076ada3342ef14f5d/b315d/profile-pic.jpg 2x" /><img loading="lazy" width="50" height="50" srcset="/static/df706245265e481076ada3342ef14f5d/99438/profile-pic.jpg 1x,
/static/df706245265e481076ada3342ef14f5d/aba1d/profile-pic.jpg 1.5x,
/static/df706245265e481076ada3342ef14f5d/b315d/profile-pic.jpg 2x" src="/static/df706245265e481076ada3342ef14f5d/99438/profile-pic.jpg" alt="Wilbur Suero" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div><p>Crafted by <strong><a href="/about">Wilbur Suero</a></strong>, a Software Engineer, who is passionate about building innovative and impactful solutions that drive business growth and operational excellence.</p></div><footer style="border-top:1px solid #ccc;padding-top:2em">Ready to bring your software vision to life? Let&#x27;s collaborate!<br/><a href="https://calendly.com/suerowilbur/30min" target="_blank" rel="noopener noreferrer">Schedule a consultation</a> to discuss your project requirements.<br/>Alternatively, you can <a href="mailto:suerowilbur@gmail.com" target="_blank" rel="noopener noreferrer">send me an email</a> directly.<br/>Stay connected and explore my work further: <a href="https://read.cv/wilbursuero" target="_blank" rel="noopener noreferrer">Read CV</a> | <a href="https://github.com/wilburhimself" target="_blank" rel="noopener noreferrer">GitHub</a> | <a href="https://linkedin.com/in/wilbursuero" target="_blank" rel="noopener noreferrer">LinkedIn</a></footer></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-EJ3RHGXYJM"></script><script>
      
      
      if(true) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){window.dataLayer && window.dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-EJ3RHGXYJM', {"send_page_view":false});
      }
      </script><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/15-mastering-decorator-pattern-ruby-on-rails/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-67ce08954519b26f9c4e.js"],"app":["/app-2775f0ba4f87a5827ee0.js"],"component---node-modules-gatsby-plugin-offline-app-shell-js":["/component---node-modules-gatsby-plugin-offline-app-shell-js-786fca1931f6eac50ed9.js"],"component---src-pages-404-js":["/component---src-pages-404-js-240f8a8f08a5c9160519.js"],"component---src-pages-about-js":["/component---src-pages-about-js-c801d421911d456d0c4a.js"],"component---src-pages-index-js":["/component---src-pages-index-js-6a70371f6e3341cc3291.js"],"component---src-templates-blog-post-js":["/component---src-templates-blog-post-js-0f3ed1f0a6031c5bc20f.js"]};/*]]>*/</script><script src="/polyfill-67ce08954519b26f9c4e.js" nomodule=""></script><script src="/component---src-templates-blog-post-js-0f3ed1f0a6031c5bc20f.js" async=""></script><script src="/cd7d5f864fc9e15ed8adef086269b0aeff617554-203f96efec8a89d8837b.js" async=""></script><script src="/133dca110fad53aa1997b630637bbac3134a2d14-4010ae11badb504b98f5.js" async=""></script><script src="/app-2775f0ba4f87a5827ee0.js" async=""></script><script src="/framework-8de36d3fd07627b19105.js" async=""></script><script src="/styles-29147cbc04bbc833f6a0.js" async=""></script><script src="/webpack-runtime-16b370fdedbe4b3f81f1.js" async=""></script></body></html>