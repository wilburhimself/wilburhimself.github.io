<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style id="typography.js">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:100%/1.75 'Merriweather','Georgia',serif;box-sizing:border-box;overflow-y:scroll;}*{box-sizing:inherit;}*:before{box-sizing:inherit;}*:after{box-sizing:inherit;}body{color:hsla(0,0%,0%,0.9);font-family:'Merriweather','Georgia',serif;font-weight:400;word-wrap:break-word;font-kerning:normal;-moz-font-feature-settings:"kern", "liga", "clig", "calt";-ms-font-feature-settings:"kern", "liga", "clig", "calt";-webkit-font-feature-settings:"kern", "liga", "clig", "calt";font-feature-settings:"kern", "liga", "clig", "calt";}img{max-width:100%;margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}h1{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:Montserrat,sans-serif;font-weight:900;text-rendering:optimizeLegibility;font-size:2.5rem;line-height:1.1;}h2{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:1.73286rem;line-height:1.1;}h3{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:1.4427rem;line-height:1.1;}h4{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.1;letter-spacing:0.140625em;text-transform:uppercase;}h5{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:0.83255rem;line-height:1.1;}h6{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:0.75966rem;line-height:1.1;font-style:italic;}hgroup{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}ul{margin-left:1.75rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;list-style-position:outside;list-style-image:none;list-style:disc;}ol{margin-left:1.75rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;list-style-position:outside;list-style-image:none;}dl{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}dd{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}p{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}figure{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}pre{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;font-size:0.85rem;line-height:1.75rem;}table{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;font-size:1rem;line-height:1.75rem;border-collapse:collapse;width:100%;}fieldset{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}blockquote{margin-left:-1.75rem;margin-right:1.75rem;margin-top:0;padding-bottom:0;padding-left:1.42188rem;padding-right:0;padding-top:0;margin-bottom:1.75rem;font-size:1.20112rem;line-height:1.75rem;color:hsla(0,0%,0%,0.59);font-style:italic;border-left:0.32813rem solid hsla(0,0%,0%,0.9);}form{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}noscript{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}iframe{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}hr{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:calc(1.75rem - 1px);background:hsla(0,0%,0%,0.2);border:none;height:1px;}address{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}b{font-weight:700;}strong{font-weight:700;}dt{font-weight:700;}th{font-weight:700;}li{margin-bottom:calc(1.75rem / 2);}ol li{padding-left:0;}ul li{padding-left:0;}li > ol{margin-left:1.75rem;margin-bottom:calc(1.75rem / 2);margin-top:calc(1.75rem / 2);}li > ul{margin-left:1.75rem;margin-bottom:calc(1.75rem / 2);margin-top:calc(1.75rem / 2);}blockquote *:last-child{margin-bottom:0;}li *:last-child{margin-bottom:0;}p *:last-child{margin-bottom:0;}li > p{margin-bottom:calc(1.75rem / 2);}code{font-size:0.85rem;line-height:1.75rem;}kbd{font-size:0.85rem;line-height:1.75rem;}samp{font-size:0.85rem;line-height:1.75rem;}abbr{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}acronym{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}abbr[title]{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;text-decoration:none;}thead{text-align:left;}td,th{text-align:left;border-bottom:1px solid hsla(0,0%,0%,0.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding-left:1.16667rem;padding-right:1.16667rem;padding-top:0.875rem;padding-bottom:calc(0.875rem - 1px);}th:first-child,td:first-child{padding-left:0;}th:last-child,td:last-child{padding-right:0;}blockquote > :last-child{margin-bottom:0;}blockquote cite{font-size:1rem;line-height:1.75rem;color:hsla(0,0%,0%,0.9);font-weight:400;}blockquote cite:before{content:"— ";}ul,ol{margin-left:0;}@media only screen and (max-width:480px){ul,ol{margin-left:1.75rem;}blockquote{margin-left:-1.3125rem;margin-right:0;padding-left:0.98438rem;}}h1,h2,h3,h4,h5,h6{margin-top:3.5rem;}a{box-shadow:0 1px 0 0 currentColor;color:#007acc;text-decoration:none;}a:hover,a:active{box-shadow:none;}mark,ins{background:#007acc;color:white;padding:0.10938rem 0.21875rem;text-decoration:none;}a.gatsby-resp-image-link{box-shadow:none;}</style><style data-href="/styles.98a513fdf05bf5edf9b6.css" id="gatsby-global-css">@import url(https://fonts.googleapis.com/css2?family=Fraunces:ital,opsz,wght@0,9..144,100..900;1,9..144,100..900&display=swap);code[class*=language-],pre[class*=language-]{font-family:Consolas,Menlo,Monaco,Andale Mono WT,Andale Mono,Lucida Console,Lucida Sans Typewriter,DejaVu Sans Mono,Bitstream Vera Sans Mono,Liberation Mono,Nimbus Mono L,Courier New,Courier,monospace;font-size:14px;line-height:1.375;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;tab-size:4;-webkit-hyphens:none;hyphens:none;background:#f5f7ff;color:#5e6687}code[class*=language-]::selection,code[class*=language-] ::selection,pre[class*=language-]::selection,pre[class*=language-] ::selection{text-shadow:none;background:#dfe2f1}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#898ea4}.token.punctuation{color:#5e6687}.token.namespace{opacity:.7}.token.boolean,.token.number,.token.operator{color:#c76b29}.token.property{color:#c08b30}.token.tag{color:#3d8fd1}.token.string{color:#22a2c9}.token.selector{color:#6679cc}.token.attr-name{color:#c76b29}.language-css .token.string,.style .token.string,.token.entity,.token.url{color:#22a2c9}.token.attr-value,.token.control,.token.directive,.token.keyword,.token.unit{color:#ac9739}.token.atrule,.token.regex,.token.statement{color:#22a2c9}.token.placeholder,.token.variable{color:#3d8fd1}.token.deleted{text-decoration:line-through}.token.inserted{border-bottom:1px dotted #202746;text-decoration:none}.token.italic{font-style:italic}.token.bold,.token.important{font-weight:700}.token.important{color:#c94922}.token.entity{cursor:help}pre>code.highlight{outline:.4em solid #c94922;outline-offset:.4em}.line-numbers .line-numbers-rows{border-right-color:#dfe2f1}.line-numbers-rows>span:before{color:#979db4}.line-highlight{background:rgba(107,115,148,.2);background:linear-gradient(90deg,rgba(107,115,148,.2) 70%,rgba(107,115,148,0))}body{background:#fff;color:#444a66;font-family:Fraunces,serif;font-optical-sizing:auto;font-size:20px}a{color:#f60}a:hover{color:#000}h1,h2,h3,h4,h5,h6{font-family:Fraunces,serif;font-size:40px}ol,ul{list-style-position:inside}.gatsby-highlight{border-top:4px solid #d3d3d3;border-bottom:4px solid #d3d3d3;margin-bottom:2em}.gatsby-highlight>pre{margin:0;background:#fff}</style><meta name="generator" content="Gatsby 2.32.13"/><link rel="preconnect dns-prefetch" href="https://www.google-analytics.com"/><link rel="alternate" type="application/rss+xml" href="/rss.xml"/><link rel="icon" href="/favicon-32x32.png?v=4a9773549091c227cd2eb82ccd9c5e3a" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><meta name="theme-color" content="#663339"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=4a9773549091c227cd2eb82ccd9c5e3a"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=4a9773549091c227cd2eb82ccd9c5e3a"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=4a9773549091c227cd2eb82ccd9c5e3a"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=4a9773549091c227cd2eb82ccd9c5e3a"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=4a9773549091c227cd2eb82ccd9c5e3a"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=4a9773549091c227cd2eb82ccd9c5e3a"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=4a9773549091c227cd2eb82ccd9c5e3a"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=4a9773549091c227cd2eb82ccd9c5e3a"/><title data-react-helmet="true">Elevating Your Ruby on Rails Apps with Value Objects | Wilbur Suero - Software Craftsman</title><meta data-react-helmet="true" name="description" content="I’ll never forget the day my team and I sat down to review the codebase for our latest Ruby on Rails project. As we dove into the details, it quickly became…"/><meta data-react-helmet="true" property="og:title" content="Elevating Your Ruby on Rails Apps with Value Objects"/><meta data-react-helmet="true" property="og:description" content="I’ll never forget the day my team and I sat down to review the codebase for our latest Ruby on Rails project. As we dove into the details, it quickly became…"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:creator" content="Wilbur Suero"/><meta data-react-helmet="true" name="twitter:title" content="Elevating Your Ruby on Rails Apps with Value Objects"/><meta data-react-helmet="true" name="twitter:description" content="I’ll never forget the day my team and I sat down to review the codebase for our latest Ruby on Rails project. As we dove into the details, it quickly became…"/><link as="script" rel="preload" href="/webpack-runtime-16b370fdedbe4b3f81f1.js"/><link as="script" rel="preload" href="/styles-29147cbc04bbc833f6a0.js"/><link as="script" rel="preload" href="/framework-8de36d3fd07627b19105.js"/><link as="script" rel="preload" href="/app-2775f0ba4f87a5827ee0.js"/><link as="script" rel="preload" href="/133dca110fad53aa1997b630637bbac3134a2d14-4010ae11badb504b98f5.js"/><link as="script" rel="preload" href="/cd7d5f864fc9e15ed8adef086269b0aeff617554-203f96efec8a89d8837b.js"/><link as="script" rel="preload" href="/component---src-templates-blog-post-js-0f3ed1f0a6031c5bc20f.js"/><link as="fetch" rel="preload" href="/page-data/16-elevating-ruby-on-rails-codebase-value-objects/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/2418676009.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/3128451518.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div style="margin-left:auto;margin-right:auto;max-width:40em;padding:2.625rem 1.3125rem"><h3 style="margin-top:0;margin-bottom:-1.75rem"><a style="box-shadow:none;text-decoration:none;color:inherit" href="/">Wilbur Suero - Software Craftsman</a></h3><h1>Elevating Your Ruby on Rails Apps with Value Objects</h1><p style="font-size:0.83255rem;line-height:1.75rem;display:block;margin-bottom:1.75rem;margin-top:-1.75rem">April 18, 2024</p><div><p>I’ll never forget the day my team and I sat down to review the codebase for our latest Ruby on Rails project. As we dove into the details, it quickly became clear that our code was a tangled web of conditional logic, duplicated calculations, and a general lack of consistency. It was a mess - the kind of thing that keeps developers up at night.</p>
<p>That’s when I realized we were missing an important tool in our application architecture: value objects. These small, immutable objects had the potential to transform our codebase from chaotic to clean, from error-prone to robust. In this post, we’ll explore what value objects are, why they’re so beneficial, and how to implement them in your Ruby on Rails projects.</p>
<h3>What is a Value Object?</h3>
<p>A value object is a small, immutable object that represents a specific value or concept within your application. Unlike an entity object, which has an identity and can change over time, a value object is purely defined by its attributes. Two value objects are considered equal if they have the same attribute values, regardless of their object identity.</p>
<p>Value objects are commonly used to represent things like money, dates, addresses, or any other domain-specific concept that doesn’t have a unique identity. By encapsulating these values into their own objects, you can improve the overall design and maintainability of your codebase.</p>
<h3>Benefits of Using Value Objects</h3>
<p>Employing value objects in your Ruby on Rails applications can provide several benefits:</p>
<ol>
<li><strong>Improved Code Readability</strong>: Value objects make your code more expressive and self-documenting. Instead of working with raw data types, you’re interacting with objects that represent meaningful concepts in your domain.</li>
<li><strong>Increased Robustness</strong>: Value objects are immutable, meaning their state cannot be changed after creation. This helps prevent unintended side effects and makes it easier to reason about your code.</li>
<li><strong>Enhanced Reusability</strong>: Value objects can be easily shared and reused across different parts of your application, promoting code consistency and reducing duplication.</li>
<li><strong>Better Error Handling</strong>: Value objects can encapsulate validation logic, ensuring that only valid values are used throughout your application. This can catch errors earlier and provide more helpful error messages.</li>
</ol>
<h3>Implementing Value Objects in Ruby on Rails</h3>
<p>Let’s look at an example of how you might implement a value object for representing a monetary amount in a Rails application.</p>
<div class="gatsby-highlight" data-language="ruby"><pre class="language-ruby"><code class="language-ruby"><span class="token comment"># app/value_objects/money.rb</span>
<span class="token keyword">class</span> <span class="token class-name">Money</span>
  <span class="token keyword">include</span> Comparable

  attr_reader <span class="token symbol">:amount</span><span class="token punctuation">,</span> <span class="token symbol">:currency</span>

  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">initialize</span></span><span class="token punctuation">(</span>amount<span class="token punctuation">,</span> currency<span class="token punctuation">)</span>
    <span class="token variable">@amount</span> <span class="token operator">=</span> amount
    <span class="token variable">@currency</span> <span class="token operator">=</span> currency
  <span class="token keyword">end</span>

  <span class="token keyword">def</span> <span class="token operator">+</span><span class="token punctuation">(</span>other<span class="token punctuation">)</span>
    <span class="token keyword">raise</span> ArgumentError<span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">"Cannot add values with different currencies"</span></span> <span class="token keyword">if</span> currency <span class="token operator">!=</span> other<span class="token punctuation">.</span>currency
    <span class="token class-name">Money</span><span class="token punctuation">.</span><span class="token keyword">new</span><span class="token punctuation">(</span>amount <span class="token operator">+</span> other<span class="token punctuation">.</span>amount<span class="token punctuation">,</span> currency<span class="token punctuation">)</span>
  <span class="token keyword">end</span>

  <span class="token keyword">def</span> <span class="token operator">-</span><span class="token punctuation">(</span>other<span class="token punctuation">)</span>
    <span class="token keyword">raise</span> ArgumentError<span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">"Cannot subtract values with different currencies"</span></span> <span class="token keyword">if</span> currency <span class="token operator">!=</span> other<span class="token punctuation">.</span>currency
    <span class="token class-name">Money</span><span class="token punctuation">.</span><span class="token keyword">new</span><span class="token punctuation">(</span>amount <span class="token operator">-</span> other<span class="token punctuation">.</span>amount<span class="token punctuation">,</span> currency<span class="token punctuation">)</span>
  <span class="token keyword">end</span>

  <span class="token keyword">def</span> <span class="token operator">*</span><span class="token punctuation">(</span>scalar<span class="token punctuation">)</span>
    <span class="token class-name">Money</span><span class="token punctuation">.</span><span class="token keyword">new</span><span class="token punctuation">(</span>amount <span class="token operator">*</span> scalar<span class="token punctuation">,</span> currency<span class="token punctuation">)</span>
  <span class="token keyword">end</span>

  <span class="token keyword">def</span> <span class="token operator">/</span><span class="token punctuation">(</span>scalar<span class="token punctuation">)</span>
    <span class="token class-name">Money</span><span class="token punctuation">.</span><span class="token keyword">new</span><span class="token punctuation">(</span>amount <span class="token operator">/</span> scalar<span class="token punctuation">,</span> currency<span class="token punctuation">)</span>
  <span class="token keyword">end</span>

  <span class="token keyword">def</span> <span class="token operator">&lt;=></span><span class="token punctuation">(</span>other<span class="token punctuation">)</span>
    <span class="token keyword">raise</span> ArgumentError<span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">"Cannot compare values with different currencies"</span></span> <span class="token keyword">if</span> currency <span class="token operator">!=</span> other<span class="token punctuation">.</span>currency
    amount <span class="token operator">&lt;=></span> other<span class="token punctuation">.</span>amount
  <span class="token keyword">end</span>

  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">to_s</span></span>
    <span class="token string-literal"><span class="token string">"</span><span class="token interpolation"><span class="token delimiter punctuation">#{</span><span class="token content">amount</span><span class="token delimiter punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token delimiter punctuation">#{</span><span class="token content">currency</span><span class="token delimiter punctuation">}</span></span><span class="token string">"</span></span>
  <span class="token keyword">end</span></code></pre></div>
<p>In this example, we’ve created a <code class="language-text">Money</code> value object that encapsulates a monetary amount and its associated currency. The object includes common arithmetic operations, such as addition, subtraction, multiplication, and division, as well as comparison methods. This allows us to perform monetary calculations in a safe and intuitive way.</p>
<p>The reason we’ve included the <code class="language-text">Comparable</code> module in the <code class="language-text">Money</code> class is to enable comparison operations between <code class="language-text">Money</code> objects. By including <code class="language-text">Comparable</code>, we can use comparison operators like <code class="language-text">&lt;</code>, <code class="language-text">></code>, <code class="language-text">&lt;=</code>, <code class="language-text">>=</code>, and <code class="language-text">==</code> to compare the values of <code class="language-text">Money</code> objects. This allows us to perform operations like sorting, min/max, and other comparison-based logic on Money objects, making the code more expressive and easier to work with.</p>
<p>Here’s how you might use the <code class="language-text">Money</code> value object in a Rails controller:</p>
<div class="gatsby-highlight" data-language="ruby"><pre class="language-ruby"><code class="language-ruby"><span class="token comment"># app/controllers/orders_controller.rb</span>
<span class="token keyword">class</span> <span class="token class-name">OrdersController</span> <span class="token operator">&lt;</span> ApplicationController
  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">create</span></span>
    total_price <span class="token operator">=</span> <span class="token class-name">Money</span><span class="token punctuation">.</span><span class="token keyword">new</span><span class="token punctuation">(</span><span class="token number">100.0</span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">'USD'</span></span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token class-name">Money</span><span class="token punctuation">.</span><span class="token keyword">new</span><span class="token punctuation">(</span><span class="token number">50.0</span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">'USD'</span></span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> total_price <span class="token operator">></span> <span class="token class-name">Money</span><span class="token punctuation">.</span><span class="token keyword">new</span><span class="token punctuation">(</span><span class="token number">149.99</span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">'USD'</span></span><span class="token punctuation">)</span>
      <span class="token comment"># Do something with the order total</span>
    <span class="token keyword">else</span>
      <span class="token comment"># Handle the case where the total is less than $149.99</span>
    <span class="token keyword">end</span>
    <span class="token variable">@order</span> <span class="token operator">=</span> <span class="token class-name">Order</span><span class="token punctuation">.</span><span class="token keyword">new</span><span class="token punctuation">(</span><span class="token symbol">total_price</span><span class="token operator">:</span> total_price<span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token variable">@order</span><span class="token punctuation">.</span>save
      redirect_to <span class="token variable">@order</span>
    <span class="token keyword">else</span>
      render <span class="token symbol">:new</span>
    <span class="token keyword">end</span>
  <span class="token keyword">end</span>
<span class="token keyword">end</span></code></pre></div>
<p>By using the <code class="language-text">Money</code> value object, we can ensure that all monetary calculations in our application are performed correctly and with the appropriate currency handling.</p>
<p>Incorporating value objects into your Ruby on Rails applications can lead to significant improvements in code quality, maintainability, and robustness. By encapsulating domain-specific concepts into their own objects, you can write more expressive, self-documenting code that is less prone to errors.</p></div><hr style="margin-bottom:1.75rem"/><ul style="display:flex;flex-wrap:wrap;justify-content:space-between;list-style:none;padding:0"><li><a rel="prev" href="/15-mastering-decorator-pattern-ruby-on-rails/">← <!-- -->Mastering the decorator pattern in Ruby on Rails</a></li><li><a rel="next" href="/17-implementing-the-saga-design-pattern/">Implementing the Saga Design Pattern in Ruby on Rails<!-- --> →</a></li></ul><div style="display:flex"><div class=" gatsby-image-wrapper" style="position:relative;overflow:hidden;display:inline-block;width:50px;height:50px;margin-right:0.875rem;margin-bottom:0;min-width:50px;border-radius:100%"><img aria-hidden="true" src="data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAGAABAQEBAQAAAAAAAAAAAAAAAAQDBQL/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAG/PGQ6jlCLwFQP/8QAHRAAAgIBBQAAAAAAAAAAAAAAAAIBAxIREyEyQf/aAAgBAQABBQLNRbFgixR7YrXd5y0Le6nn/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAwEBPwEf/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAgEBPwEf/8QAHBAAAgEFAQAAAAAAAAAAAAAAAAERAhAhMWFB/9oACAEBAAY/An50xU3w0bkcPF2I/8QAHBAAAwACAwEAAAAAAAAAAAAAAAERITFBUWGx/9oACAEBAAE/IaRblg4i9s6xK9nReStJPBvhm0uJjQsysHbds+Q9s2qf/9oADAMBAAIAAwAAABBgyDz/xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAEDAQE/EB//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAECAQE/EB//xAAcEAEBAAMAAwEAAAAAAAAAAAABEQAhMUFRYXH/2gAIAQEAAT8QnrQNbCWyd1iOw4NDtFMdcJIy0yEo1A0iLzHlowLPgnvHQOHi80Yqm3v3BTdPn9MQSKKXy1z/2Q==" alt="Wilbur Suero" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms"/><noscript><picture><source srcset="/static/df706245265e481076ada3342ef14f5d/99438/profile-pic.jpg 1x,
/static/df706245265e481076ada3342ef14f5d/aba1d/profile-pic.jpg 1.5x,
/static/df706245265e481076ada3342ef14f5d/b315d/profile-pic.jpg 2x" /><img loading="lazy" width="50" height="50" srcset="/static/df706245265e481076ada3342ef14f5d/99438/profile-pic.jpg 1x,
/static/df706245265e481076ada3342ef14f5d/aba1d/profile-pic.jpg 1.5x,
/static/df706245265e481076ada3342ef14f5d/b315d/profile-pic.jpg 2x" src="/static/df706245265e481076ada3342ef14f5d/99438/profile-pic.jpg" alt="Wilbur Suero" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div><p>Crafted by <strong><a href="/about">Wilbur Suero</a></strong>, a Software Engineer, who is passionate about building innovative and impactful solutions that drive business growth and operational excellence.</p></div><footer style="border-top:1px solid #ccc;padding-top:2em">Ready to bring your software vision to life? Let&#x27;s collaborate!<br/><a href="https://calendly.com/suerowilbur/30min" target="_blank" rel="noopener noreferrer">Schedule a consultation</a> to discuss your project requirements.<br/>Alternatively, you can <a href="mailto:suerowilbur@gmail.com" target="_blank" rel="noopener noreferrer">send me an email</a> directly.<br/>Stay connected and explore my work further: <a href="https://read.cv/wilbursuero" target="_blank" rel="noopener noreferrer">Read CV</a> | <a href="https://github.com/wilburhimself" target="_blank" rel="noopener noreferrer">GitHub</a> | <a href="https://linkedin.com/in/wilbursuero" target="_blank" rel="noopener noreferrer">LinkedIn</a></footer></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-EJ3RHGXYJM"></script><script>
      
      
      if(true) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){window.dataLayer && window.dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-EJ3RHGXYJM', {"send_page_view":false});
      }
      </script><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/16-elevating-ruby-on-rails-codebase-value-objects/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-67ce08954519b26f9c4e.js"],"app":["/app-2775f0ba4f87a5827ee0.js"],"component---node-modules-gatsby-plugin-offline-app-shell-js":["/component---node-modules-gatsby-plugin-offline-app-shell-js-786fca1931f6eac50ed9.js"],"component---src-pages-404-js":["/component---src-pages-404-js-240f8a8f08a5c9160519.js"],"component---src-pages-about-js":["/component---src-pages-about-js-c801d421911d456d0c4a.js"],"component---src-pages-index-js":["/component---src-pages-index-js-6a70371f6e3341cc3291.js"],"component---src-templates-blog-post-js":["/component---src-templates-blog-post-js-0f3ed1f0a6031c5bc20f.js"]};/*]]>*/</script><script src="/polyfill-67ce08954519b26f9c4e.js" nomodule=""></script><script src="/component---src-templates-blog-post-js-0f3ed1f0a6031c5bc20f.js" async=""></script><script src="/cd7d5f864fc9e15ed8adef086269b0aeff617554-203f96efec8a89d8837b.js" async=""></script><script src="/133dca110fad53aa1997b630637bbac3134a2d14-4010ae11badb504b98f5.js" async=""></script><script src="/app-2775f0ba4f87a5827ee0.js" async=""></script><script src="/framework-8de36d3fd07627b19105.js" async=""></script><script src="/styles-29147cbc04bbc833f6a0.js" async=""></script><script src="/webpack-runtime-16b370fdedbe4b3f81f1.js" async=""></script></body></html>